"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,o=(t=require("axios"))&&"object"==typeof t&&"default"in t?t.default:t;function r(t,o){try{var r=t()}catch(t){return o(t)}return r&&r.then?r.then(void 0,o):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var e="undefined"!=typeof window,n={coords:{accuracy:0,altitude:null,altitudeAccuracy:null,heading:null,latitude:0,longitude:0,speed:null},timestamp:0},i={lat:"",lon:"",address:{country_code:""}},a={enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3};exports.Localizer=function(){function t(t){void 0===t&&(t={}),this.navigator={},this.position=n,this.locale="",this.userAgent="",this.ip="",this.location=i,this.positionOptions=a,this.returnPositionCallback=function(t){return function(o){t.position=o}},this.positionErrorCallback=function(t){console.log(t)},this.locale=t.defaultLocale||"en-US",e&&(this.navigator=t.navigator||window.navigator),t.positionOptions&&(this.positionOptions=t.positionOptions)}var s=t.prototype;return s.getPosition=function(){try{var t=this;return Promise.resolve(r((function(){if(!e||!t.navigator||!t.navigator.geolocation)throw new Error("Cannot get position outside of browser");return Promise.resolve(t.navigator.geolocation.getCurrentPosition(t.returnPositionCallback(t),t.positionErrorCallback,t.positionOptions)).then((function(){return t.position}))}),(function(t){throw new Error("Error: Navigator unable to retrieve position. \n "+t)})))}catch(t){return Promise.reject(t)}},s.getLocation=function(t,e){try{var n=this;return void 0===t&&void 0===e&&n.position.timestamp>0&&(t=n.position.coords.latitude,e=n.position.coords.longitude),Promise.resolve(r((function(){return Promise.resolve(o.get("https://nominatim.openstreetmap.org/reverse?format=json&lat="+t+"&lon="+e)).then((function(t){var o=t.data;return n.location=o,o}))}),(function(t){throw new Error("Error: Nomination unable to retrieve location. \n "+t)})))}catch(t){return Promise.reject(t)}},s.getIp=function(){try{var t=this;return Promise.resolve(r((function(){return Promise.resolve(o.get("https://www.cloudflare.com/cdn-cgi/trace")).then((function(o){var r=t.parsePlainTextData(o.data);return t.ip=r.ip,t.location.address.country_code=r.loc.toLowerCase(),t.userAgent=r.uag,r}))}),(function(t){throw new Error("Error: Cloudflare unable to retrieve IP. \n "+t)})))}catch(t){return Promise.reject(t)}},s.getLocale=function(){if(!e||!this.navigator||!this.navigator.languages)throw new Error("Cannot get locale outside of browser");return this.locale=this.navigator.languages[0],this.locale},s.getUserAgent=function(){if(!e||!this.navigator||!this.navigator.userAgent)throw new Error("Cannot get useragent outside of browser");return this.userAgent=this.navigator.userAgent,this.userAgent},s.parsePlainTextData=function(t){var o={};return t.replace(/(\w+)=(.+)/g,(function(t,r,e){return o[r]=e})),o},t}();
//# sourceMappingURL=segmentation-sdk.cjs.production.min.js.map
